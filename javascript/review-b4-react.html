<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Open console.</h1>

    <script>

        // OBJETO

        const user = {
            name: 'Thales',
            age: 25,
            address: {
                street: 'Rua Teste',
                number: 777,
            },
        };

        // DESESTRUTURAÇÃO é mover parte de um objeto pra uma variável a parte.
        const { address, age } = user;
        const { name } = user;
        const { street } = user.address;

        console.log(JSON.stringify({address, age})); // {"address":{"street":"Rua Teste","number":777},"age":25}
        console.log(JSON.stringify(address)); // {"street":"Rua Teste","number":777}
        console.log(JSON.stringify(name)); // "Thales"
        console.log(JSON.stringify(street)); // "Rua Teste"

        // Também é possível renomear as variáveis que são extraidas
        const { street: rua } = user.address;
        console.log(JSON.stringify(rua)); // "Rua Teste"

        // Também é possível setar um valor padrão caso a variável não exista
        const { teste  } = user;
        console.log(teste); // undefined

        const { apelido = 'Overseer'} = user;
        console.log(apelido); // Overseer

        const { age: idade = 1111} = user;
        console.log(idade); // 25 // (Nessa caso ele puxou o valor já definido dentro do objeto)

        // É possível usar a desestruturação como parametro de função
        function showAge({age}) {
            return age;
        }

        console.log(showAge(user)); // 25

        // REST OPERATOR, usando em união com a desestruturação
        const { name: n, ...rest } = user;
        console.log(JSON.stringify(rest)); // {"age":25,"address":{"street":"Rua Teste","number":777}}

        const array = [1,2,3,4,5,6,7,8,9,10];
        const [first, second, ...restante] = array;
        console.log(JSON.stringify({first, second, restante})); // {"first":1,"second":2,"restante":[3,4,5,6,7,8,9,10]}

        // É possível pular um elemento também, porém ele se perde
        const [ firstE, , thirdE, ...resto] = array;
        console.log(JSON.stringify({firstE, thirdE, resto})); // {"firstE":1,"thirdE":3,"resto":[4,5,6,7,8,9,10]}

        // OPTIONAL CHAINING
        const steamUser = {
            name: 'Thales',
            age: '26',
            address: {
                street: 'Rua Testeam',
                number: '1163',
                zip: {
                    code: '333666',
                    city: 'Rio do Sul',
                },
            },
        };

        // A interrogação checa se existe a propriedade para não dar o erro e as ??
        // interrogações checam se o retorno é null, e se for retorna  o que for informado após elas
        console.log(steamUser.address?.zip?.code ?? 'Not informed');

    </script>
</body>
</html>